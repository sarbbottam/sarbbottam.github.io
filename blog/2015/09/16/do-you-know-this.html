<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>
      
      
      Sarbbottam’s weblog - Do you know this? 
    </title>
    <!-- Begin Jekyll SEO tag v2.0.0 -->
<meta property="og:title" content="Do you know this?" />
<meta name="description" content="The value of this in ECMAScript refers to the execution context of the function. In ECMAScript there are three execution context; namely global, function and evaluation. Following example will help to comprehend the concept better." />
<meta property="og:description" content="The value of this in ECMAScript refers to the execution context of the function. In ECMAScript there are three execution context; namely global, function and evaluation. Following example will help to comprehend the concept better." />
<link rel="canonical" href="https://sarbbottam.github.io/blog/2015/09/16/do-you-know-this" />
<meta property="og:url" content="https://sarbbottam.github.io/blog/2015/09/16/do-you-know-this" />
<meta property="og:site_name" content="Sarbbottam’s weblog" />
<meta property="og:image" content="https://sarbbottam.github.io/images/sarbbottam.jpeg" />
<meta property="og:image:height" content="100" />
<meta property="og:image:width" content="100" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-09-16T10:50:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@sarbbottam" />
<meta name="twitter:creator" content="@sarbbottam" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Do you know this?",
"image": "https://sarbbottam.github.io/images/sarbbottam.jpeg",
"datePublished": "2015-09-16T10:50:00+00:00",
"description": "The value of this in ECMAScript refers to the execution context of the function. In ECMAScript there are three execution context; namely global, function and evaluation. Following example will help to comprehend the concept better.",
"url": "https://sarbbottam.github.io/blog/2015/09/16/do-you-know-this"}</script>
<!-- End Jekyll SEO tag -->

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/css/main.css">

</head>


    <body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/">Sarbbottam’s weblog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
          <a href="/">Blog</a>
        
          <a href="/project">Project</a>
        
          <a href="/design">Design</a>
        
          <a href="/about">About</a>
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      
      
      <h1>Do you know this?</h1>
      <div class="post">

  <p class="post-meta">
    Sep 16, 2015
     -
    
    
      5 mins read
    
  </p>

  <article class="post-content">
  <p>The value of <code class="highlighter-rouge">this</code> in ECMAScript refers to the execution context of the function.
In ECMAScript there are three execution context; namely global, function and evaluation.
Following example will help to comprehend the concept better.</p>

<h2 id="global-context">Global context:</h2>

<p>In the global context <code class="highlighter-rouge">this</code> refers to the window object.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="c1">// Window</span>
</code></pre>
</div>

<h2 id="function-context">Function context:</h2>

<p>In ECMAScript a function can be invoked in five different way:</p>

<ul>
  <li>method invocation</li>
  <li>function invocation</li>
  <li>constructor invocation</li>
  <li>apply invocation</li>
  <li>call invocation.</li>
</ul>

<p>The value of this within the function context depends on how the function has been invoked.</p>

<h3 id="method-invocation">Method invocation:</h3>

<p>In method invocation pattern this refers to the object (on which the method has been invoked) itself. The value of this gets bound to the object at the time of invocation.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">bar</span> <span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
       <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">())</span> <span class="c1">// Object; that refers to foo</span>

<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">bar</span> <span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">foo</span> <span class="o">===</span> <span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">());</span> <span class="c1">// true; 'this' returned by bar is nothing but foo</span>
</code></pre>
</div>

<h3 id="function-invocation">Function invocation:</h3>

<p>In function invocation pattern this refers to the window object.
In the broader perspective even function invocation pattern is nothing but method invocation pattern.
The context of the function is window. Lets consider we have a named function <code class="highlighter-rouge">baz</code> as below:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">baz</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p>In the function invocation pattern <code class="highlighter-rouge">baz</code> can be invoked as:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">baz</span><span class="p">();</span> <span class="c1">// Window</span>
</code></pre>
</div>
<p>However <code class="highlighter-rouge">baz</code> can also be invoked as:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nx">baz</span><span class="p">();</span> <span class="c1">// Window; as stated in method invocation pattern</span>
</code></pre>
</div>

<p>All the global (variables, objects, functions) are associated with window and as per the specification, when referring a global the window reference can be omitted.
Thus window refers to the global context in function invocation pattern.</p>

<h3 id="constructor-invocation">Constructor Invocation:</h3>

<p>In the constructor invocation pattern, when a function is invoked with <code class="highlighter-rouge">new</code> operator, <code class="highlighter-rouge">this</code> refers to the new object that gets created and returned by the function (provide there is no explicit return statement).</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span><span class="c1">// By convention the constructor name starts with upper case letter</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// Foo</span>
<span class="p">}</span>
</code></pre>
</div>

<p>The above code is can be interpreted as</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Foo</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span><span class="c1">// By convention the constructor name starts with upper case letter</span>
    <span class="c1">// create a new object</span>
    <span class="c1">// using the object literal</span>
    <span class="c1">// var this = {};</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// Foo, only when invoked as new Foo(); otherwise this will refer to Window</span>
    <span class="c1">// return this;</span>
<span class="p">}</span>
</code></pre>
</div>

<p><strong>ES2015</strong> provides <code class="highlighter-rouge">class</code> functionality, which follows the same paradigm.</p>

<h3 id="apply-invocation--call-invocation">Apply Invocation &amp; Call Invocation:</h3>

<p>Apply and Call invocation differs the way argument is treated. But with respect to this both the pattern behaves in the same way.
The beauty of these two patterns is that this can be set to any desired context.</p>

<p><strong>ES5</strong> provides the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind"><code class="highlighter-rouge">bind</code></a> functionality, it creates a new function that, when called, has its <code class="highlighter-rouge">this</code> keyword set to the provided value.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="p">{}</span>

<span class="kd">var</span> <span class="nx">qux</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">qux</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">bar</span><span class="p">)</span> <span class="c1">// Object; that refers to bar</span>

<span class="nx">qux</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bar</span><span class="p">)</span> <span class="c1">// Object; that refers to foo</span>
</code></pre>
</div>

<h3 id="evaluation-context">Evaluation context:</h3>

<p>In evaluation context the value of this refers to the context of the scope.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nb">eval</span><span class="p">(</span><span class="s1">'console.log(this)'</span><span class="p">)</span> <span class="c1">// Window</span>
</code></pre>
</div>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">bar</span> <span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="nb">eval</span><span class="p">(</span><span class="s1">'console.log(this)'</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">foo</span><span class="p">.</span><span class="nx">bar</span><span class="p">();</span> <span class="c1">// Object; that refers to foo</span>
</code></pre>
</div>

<p>A word of caution: One should refrain from using <code class="highlighter-rouge">eval</code>, most of the ECMAScript ninjas consider “<code class="highlighter-rouge">eval</code> is evil”.
However, I feel that <code class="highlighter-rouge">eval</code> is too powerful to be utilized.
Improper utilization can produce unexpected results, which can be really frightening, for example <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSS</a> attacks.</p>

<h3 id="anonymous-function">Anonymous function</h3>

<p>In <code class="highlighter-rouge">strict</code> mode; it’s <code class="highlighter-rouge">undefined</code> other wise global <code class="highlighter-rouge">this</code>, <code class="highlighter-rouge">Window</code> in browser.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="s1">'use strict'</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">// undefined</span>
<span class="p">}());</span>

<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="c1">//[object global]</span>
<span class="p">}());</span>
</code></pre>
</div>

<p>In <strong>ES2015 arrow function</strong>, <code class="highlighter-rouge">this</code> is the lexical <code class="highlighter-rouge">this</code>.</p>

  <hr/>
  If you have enjoyed reading this post you can follow me on twitter <a href="https://twitter.com/sarbbottam">@sarbbottam</a> and learn about any new posts.
  <em>Opinions expressed are solely my own and do not express the views or opinions of my employer.</em>
  </article>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js"></script>
<script>
  anchors.options = {
    icon: '#',
    placement: 'left'
  };
  anchors.add();
</script>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES * * */
      var disqus_shortname = 'sarbbottam';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
</div>

      </div>
    </div>
    <footer class="site-footer">

  <div class="wrap flex-wrap">
    <div>
      <a href="https://github.com/sarbbottam">
        <span class="icon github">
          <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
            c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
            c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
            c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
            C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
            c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
            c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
            c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
            c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
          </svg>
        </span>
        <span class="username">sarbbottam</span>
      </a>
    </div>
    <div>
      <a href="https://twitter.com/sarbbottam">
        <span class="icon twitter">
          <svg version="1.1" class="twitter-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
            <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
            c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
            c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
            c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
            C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
            c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
            c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
          </svg>
        </span>
        <span class="username">sarbbottam</span>
      </a>
    </div>
    <div>
      subscribe <a href="/feed.xml">via RSS</a>
    </div>
  </div>

</footer>


    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86047817-1', 'auto');
  ga('send', 'pageview', location.pathname);

</script>

    

    </body>
</html>